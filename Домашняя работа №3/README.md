# Домашнее задание №3
## Развернуть контейнер с публичным образом в Docker.
1. Для сборки образа необходимо создать Dockerfile - файл содержащий инструкции для сборки.
    - ```touch Dockerfile```
2. В Dockerfile прописать следующие инструкции:
    - Задаем базовый образ на основе которого будет собираться новый образ, в данном случае используется образ Ubuntu с последней версией(latest).
        
        ```FROM ubuntu:latest```
    - Обновляем пакетную базу в системе, чтобы были установлены последние версии пакетов. Устанавливаем ```Bash``` в контейнер, флаг -y отвечает на все запросы установки "да".
        
        ```RUN apt-get update & apt-get install -y bash```
    - Копируем файл test.sh в контейнер, чтобы был доступен внутри образа.
        
        ```COPY test.sh /test.sh```
    - Запускаем скрипт внутри образа.
        
        ```RUN /test.sh"```
    - Указываем команду которая будет выполнена при запуске контейнера. В данном случае ```Bash``` который запускает скрипт ```test.sh```.
        
        ```CMD [ "/bin/bash", "/test.sh" ]```
3. Собрать образ с помощью команды ```docker build```.
    - ```docker build -t myfirstimage .```
    - Флаг -t позволяет присвоить наименование образу.
4. Запустить образ с помощью команды ```docker run```.
    - ```docker run -it myfirstimage```
    - Флаг -it позволяет запустить образ в режиме терминала.
    - Флаг -d позволяет запускать образ в фоновом режиме.

## Развернуть свой сервер на котором будут храниться Jupiter notebooks. 
1. Для сборки соберем Dockerfile - файл содержащий инструкции для сборки.
    - ```touch Jupyter/Dockerfile```
2. В Dockerfile прописать следующие инструкции:
    #### Базовый образ Jupyter
    - ```FROM jupyter/minimal-notebook:latest```
    #### Создаем папку для ноутбуков
    - ```RUN mkdir /home/jovyan/all_notebooks```
    #### Изменим владельца владельца или группы папки
    - ```RUN chown -R jovyan:users /home/jovyan/all_notebooks```
    #### Устанавливаем переменные окружения 
    - ```ENV JUPYTER_ENABLE_LAB=yes```
    #### Устанавливаем имя пользователя в контейнере как jovyan - имя которое используется поумолчанию
    - ```ENV NB_USER=jovyan```
    #### Устанавливаем UID пользователя в контейнере
    - ```ENV NB_UID=1000```
    #### Устанавливаем GID пользователя в контейнере
    - ```ENV NB_GID=100```
    #### Запускаем Jupyter Notebook с параметрами командной строки
    - ```CMD ["jupyter", "notebook", "--ip=0.0.0.0", "--port=8889", "--no-browser", "--allow-root", "--NotebookApp.token=''", "--NotebookApp.notebook_dir=/home/jovyan/all_notebooks"]```
    - ##### "jupyter", "notebook" - Запускает контейнер поумолчанию с определенными параметрами.
    - ##### "--ip=0.0.0.0", "--port=8889" - Устанавливает порт и прослушивание всех доступных IP-адресов контейра.
    - ##### "--no-browser" - Отключает открытие браузера при запуске.
    - ##### "--allow-root" - Разрешает запускать Jupyter Notebook в режиме root.
    - ##### "--NotebookApp.token=''" - Устанавливает токен для доступа к Jupyter Notebook.
    - ##### "--NotebookApp.notebook_dir=/home/jovyan/all_notebooks" - Устанавливает рабочую директорию для Jupyter Notebook.
3. Собрать образ с помощью команды ```docker build```.
    - ```docker build -t jupyter-image .```
    - Флаг -t позволяет присвоить наименование образу.
4. Запустить образ с помощью команды ```docker run```.
    -   ```docker run -it -p 8889:8889 jupyter_custom```
    - Флаг ```-i``` и ```-t``` используются вместе для интерактивного режима.
        - ```-i``` поддерживает интерактивный режим, позволяя взаимодействовать с контейнером через терминал.
        - ```-t``` позволяет псеводотерминал, что необходимо для работы командной строки в интерактивном режиме.
    - Вместе флаги ```-it``` делают так, что я вижу логи контейнера и позволяет вводить команды в терминале.
    - ```-p 8889:8889``` пробрасывает порт из контейнера на хост машину:
        - ```8889``` - порт в хост машине. 
        - ```8889``` - порт в контейнере.
    - ```jupyter_custom``` - имя образа, которое мы создали.